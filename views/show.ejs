<% layout('/layouts/boilerplate.ejs') %>
<body>
    <div class="row">
        <div class="cols-8 offset-2 mb-5">
          <h4><%= item.title %></h4>
          <div class="card" style="width: 32rem; height:20rem;">
          <img src="<%= item.image %>" class="card-img-top" alt="image">
            <div class="card-body">
            <p class="card-text">
                <%= item.description %> <br>
                &#8377; <%= item.price.toLocaleString('en-IN') %> <br>
                <%= item.location %> <br>
                <%= item.country %>
            </p> 
      
        <div class="btns">
            <form action="/listings/<%= item._id %>/edit">
                <button class="btn btn-dark add">Edit</button>
            </form>
            <form method="POST" action="/listings/<%= item._id %>?_method=DELETE">
                <button class="btn btn-dark add offset-5">Delete</button>
            </form>
        </div>
    
         <!-- rating -->
       
        <hr>
        <h4>Leave a review</h4>
        <form action="/listings/<%= item._id %>/reviews" method="POST" novalidate class="needs-validation">

            <div >
              <label for="rating" class="form-lable ">Rating:</label>
              <input type="range" name="rating" id="rating" min="1" max="5" class="form-range mb-3" >
            </div>
          
            <div mt-3>
              <label for="comment" class="form-lable">Comment:</label>
              <textarea name="comment" id="comment" cols="10" rows="2" class="form-control" required ></textarea>
              <div class="valid-feedback">
                Looks good!
               </div>
               <div class="invalid-feedback">
               please enter a comment
               </div>
            </div>
            <button class="btn mt-3 add">submit</button>
        </form>

        <hr>
        <h4>All Reviews:</h4>
          <div class="row mt-3">
         
          <% for(let review of item.reviews) {%>
             <div class="card_review col-5 ms-3 pb-2">
                <h5 class="card-text">pm</h5>
                <p class="card-text "><%= review.comment %></p>
                <p class="card-text "><%= review.rating %> star</p>
                
                <form action="/listings/<%= item._id %>/reviews/<%- review._id %>?_method=DELETE" method="POST">
                  <button class="btn add">Delete</button>
                 </form>
             </div> 
         
          <% } %>
     
        </div>

     </div> 
      </div> 
    </div>
  </div>
</div>

</body>
